{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block js %} {{block.super}}


<script type="text/javascript" src="{% static 'js/edit-portfolio-question/app.js' %}">// must be the 1º</script>
<script type="text/javascript" src="{% static 'js/factories/timtec-models.js' %}">// must be the 2º</script>
<script type="text/javascript" src="{% static 'js/filters/text.js' %}"></script>
<script type="text/javascript" src="{% static 'js/directives/alertPopup.js' %}"></script>
<script type="text/javascript" src="{% static 'js/directives/waiting-screen.js' %}"></script>
<script type="text/javascript" src="{% static 'js/directives/contenteditable.js' %}"></script>
<script type="text/javascript" src="{% static 'js/directives/fixedBar.js' %}"></script>
<script type="text/javascript" src="{% static 'js/directives/markdowneditor.js' %}"></script>
<script type="text/javascript" src="{% static 'js/directives/codemirror.js' %}"></script>
<script type="text/javascript" src="{% static 'js/directives/sortable.js' %}"></script>
<script type="text/javascript" src="{% static 'js/edit-portfolio-question/controllers.js' %}">// must be the 1º</script>
{% endblock %}

{% block body_attrs %}
ng-app="edit-portfolio-question"
{% endblock %}


{% block content %}
<!-- COURSE-CONTENT -->
<div id="course" class="course-lesson" ng-controller="EditPortfolioQuestionController">

       <!-- ACTIONS -->
    <div class="actions" fixed-bar>
        <div class="container">
            <div class="row">
                <div class="col-xs-5">
                    <button class="btn btn-danger" ng-click="deletePortfolioQuestion()"><i class="fa fa-trash-o"></i> | {% trans 'Delete this portfolio question' %}</button>
                </div>
                <div class="col-xs-7 textright">
                    <button class="btn btn-success" ng-click="savePortfolioQuestion()">{% trans 'Save' %} | <i class="fa fa-save"></i></button>
                    <button class="btn btn-warning" ng-click="publishPortfolioQuestion();">{% trans 'Publish portfolio question' %} | <i class="fa fa-star-o"></i></button>
                </div>
            </div>
        </div>
    </div>
    <!-- END ACTIONS -->

    {% include "_admin_header_inline.html" %}

    <!-- COURSE-CONTENT -->
    <section id="course-content" class="container">

        <nav class="course-lessons">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="top editable"></h1>
                    <h1><span ng-class="{'blink-text-danger':errors.name}" ng-model="portfolioquestion.title"
                              placeholder="{% trans 'Portfolio Question Title' %}" contenteditable="true"></span></h1>

                    <p class="description editable">
                        <span ng-model="portfolioquestion.description" placeholder="{% trans 'description' %}"
                              contenteditable="true"></span></p>
                </div>
            </div>
        </nav>


        <!-- ROW -->
        <div class="row">

            <div class="add-content" ng-init="section='video'">
                <div class="col-xs-6 col-xs-6">
                    <button class="btn btn-default uppercase"
                            ng-class="{'btn-info': section === 'video'}"
                            ng-click="section ='video'">{% trans 'Video' %}</button>

                    <button class="btn btn-default uppercase"
                            ng-class="{'btn-info': section === 'document'}"
                            ng-click="section ='document'">{% trans 'Document' %}</button>
                </div>
            </div>

            <!-- VIDEO SECTION -->
            <div class="video col-sm-8" ng-show="section === 'video'">

                <div class="waiting textcenter jumbotron"
                     style="height: 419px"
                     ng-show="portfolioquestion.video.youtube_id && !playerReady">
                    <div class="middle">
                        <i class="fa fa-refresh fa-5x"></i>
                    </div>
                </div>

                <!-- ADD-PORTFOLIO-QUESTION -->
                <div class="add-video-intro textcenter" ng-hide="portfolioquestion.video">
                    <!-- CENTERED -->
                    <div class="centered">
                        <i class="fa fa-youtube-play fa-4x"></i>
                        <h1 class="top">{% trans 'PortfolioQuestion video' %}</h1>
                        <p class="form-group">
                            <input type="text" class="form-control"
                                   ng-model="portfolioquestion.intended_youtube_id"/>
                        </p>
                        <p>
                            <button class="btn btn-danger btn-lg uppercase"
                                    ng-click="portfolioquestion.intended_youtube_id=''">{% trans 'Cancel' %}</button>

                            <button class="btn btn-success btn-lg uppercase"
                                    ng-click="setPortfolioQuestionVideo()">{% trans 'Add' %}</button>
                        </p>
                    </div>
                    <!-- END CENTERED -->
                </div>

                <div class="current-video" style="overflow:hidden;" ng-style="{'display': portfolioquestion.video && playerReady ?'':'none'}">

                    <div id="player-outter">
                        <div id="youtube-player" player-height="419px" player-width="100%" youtube-player></div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <p class="video-title" ng-model="portfolioquestion.video.name" placeholder="Nome do vídeo" contenteditable><p>
                        </div>
                        <div class="col-xs-6 textright">
                            <button class="btn-edit-video btn btn-success btn-sm uppercase"
                                    ng-click="portfolioquestion.video = null">{% trans 'Change video' %}</button>
                        </div>
                    </div>
                </div>
                <!-- END ADD-VIDEO-INTRO -->

            </div>
            <!-- END VIDEO SECTION -->

            <!-- DOCUMENT SECTION -->
            <div class="activity" ng-show="section==='document'">
                <div class="row">
                            <div class=" col-sm-12 col-lg-12 textcenter "
                                 style="height: 419px"
                                 ng-show="portfolioquestion.document.document_id && !pdfReady">
                                <div class="middle" >

                                   <div class="wrapper" style="height: 400px;width:auto;overflow-y: scroll;">
                                        <ng-pdf  template-url="/static/templates/viewerPDF.html" canvasid="pdf" scale="2"></ng-pdf>

                                   </div>

                                </div>
                            </div>

                            <!-- ADD-PORTFOLIO-QUESTION -->
                            <div class="add-video-intro col-sm-12 col-lg-12 block textcenter" ng-hide="portfolioquestion.document">
                                <!-- CENTERED -->
                                <div class="centered">

                                    <h1 class="top">{% trans 'PortfolioQuestion document' %}</h1>
                                    <p class="form-group">
                                        <input type="text" class="form-control" ng-model="portfolioquestion.intended_document_name" placeholder="Document name"/>
                                        <input type="text" class="form-control" ng-model="portfolioquestion.intended_document_id" placeholder="Document URL"/>
                                    </p>

                                        <button class="btn btn-danger btn-lg uppercase" ng-click="portfolioquestion.intended_document_id=''">{% trans 'Cancel' %}</button>
                                        <button class="btn btn-success btn-lg uppercase" ng-click="setPortfolioQuestionDocument()">{% trans 'Add' %}</button>

                                </div>
                                <!-- END CENTERED -->
                            </div>
                             <div class="col-lg-12 left right" style="overflow:hidden;" ng-style="{'display': portfolioquestion.video}">
                                <div id="youtube-player" player-height="419px" player-width="100%" youtube-player></div>
                                <div class="row">
                                    <div class="col-lg-8">
                                        <p class="video-title" ng-model="portfolioquestion.document.name" placeholder="Nome do Document" contenteditable><p>
                                    </div>
                                    <div class="col-lg-4 textright">
                                        <button class="btn-edit-video btn btn-success btn-sm uppercase" ng-click="portfolioquestion.document = null">{% trans 'Change document' %}</button>
                                    </div>
                                </div>
                            </div>


                            <!-- END ADD-VIDEO-PORTFOLIO-QUESTION -->
                        </div>
            </div>
            <!-- END ACTIVITIES SECTION -->
        </div>
        <!-- END ROW -->
    </section>
    <!-- END COURSE-CONTENT -->
    <!-- ALERT -->
    <div class="tt-popup notifications" alert-popup ng-class="{'hideTop': alert.hidden}">
        <div class="alert fade in" ng-class="'alert-' + alert.type">
            <button type="button" class="close" ng-click="alert.hidden=true">×</button>
            <h4 ng-bind="alert.title"></h4>
            <p class="bottom">
                <ol class="bottom">
                    <li ng-repeat="message in alert.messages" ng-bind="message"></li>
                </ol>
            </p>
            <div ng-show="alert.showControls">
                <hr/>
                <button type="button" class="btn" ng-class="'btn-'+alert.type"
                         ng-click="alert.hidden=true">{% trans 'Close' %}</button>
            </div>
        </div>
    </div>
    <!-- ALERT -->
</div>
<!-- END COURSE-CONTENT -->
<div waiting-screen class="waiting waiting-screen">
    <div class="middle">
        <i class="fa fa-refresh fa-5x"></i>
    </div>
</div>
{% endblock content %}

